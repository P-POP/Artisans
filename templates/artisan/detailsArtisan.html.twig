{% extends 'base.html.twig' %}

{% block title %}
    Details de l'artisan
{% endblock %}

{% block body %}
<main>
    <div class="container">
        <div class="row d-lg-flex">
            <div class="col-12 col-lg-6">
            <div class="row align-items-center carousel slide" data-bs-ride="carousel">
                    <div class="col left carousel-control leftArrow" role="button">
                        <svg xmlns="http://www.w3.org/2000/svg"  width="30" height="30" fill="currentColor" class="bi bi-arrow-bar-left" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M12.5 15a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 1 0v13a.5.5 0 0 1-.5.5zM10 8a.5.5 0 0 1-.5.5H3.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L3.707 7.5H9.5a.5.5 0 0 1 .5.5z"/>
                        </svg>
                    </div>
                    <div class="carousel-inner col">
                        <div class=" carousel-item  active">
                            <img src="/images/artisan.jpg" alt="" class="sizeImg d-block" >
                        </div>
                        <div class="carousel-item">
                            <img src="/images/structure/home/alimentaire.jpeg" alt="" class="sizeImg d-block " >
                        </div>
                        <div class=" carousel-item">
                            <img src="/images/structure/home/boulangerie.jpeg" alt="" class="sizeImg d-block " >
                        </div>
                    </div>
                    <div class="col right carousel-control rightArrow" role="button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-bar-right" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M6 8a.5.5 0 0 0 .5.5h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L12.293 7.5H6.5A.5.5 0 0 0 6 8zm-2.5 7a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 1 0v13a.5.5 0 0 1-.5.5z"/>
                        </svg>
                    </div>
                </div>
            </div>
        <div class="col">
                <h1>{{oneArtisan.name}}</h1> 
                <p>{{oneArtisan.address}}</p>
                <p>{{oneArtisan.description}}</p>
            </div>
        </div>
    


<section class="avis h=200">

    <h3 class="mt-5">Tous les avis</h3>
    
    {% for owner in oneArtisan.owner %}

        

        <ul>
            <li>{{ owner.avis }} - Note: {{ owner.score }}/5 
                {% if owner.score == 1 %}
                    <i class="text-warning" data-value="1">★</i></i><i class="star" data-value="1">★</i></i><i class="star" data-value="1">★</i></i><i class="star" data-value="1">★</i></i><i class="star" data-value="1">★</i>
                {% endif %}

                {% if owner.score == 2 %}
                    <i class="text-warning" data-value="1">★</i><i class="text-warning" data-value="1">★</i></i><i class="star" data-value="1">★</i></i><i class="star" data-value="1">★</i></i><i class="star" data-value="1">★</i>
                {% endif %}

                {% if owner.score == 3 %}
                    <i class="text-warning" data-value="1">★</i><i class="text-warning" data-value="1">★</i><i class="text-warning" data-value="1">★</i></i><i class="star" data-value="1">★</i></i><i class="star" data-value="1">★</i>
                {% endif %}

                {% if owner.score == 4 %}
                    <i class="text-warning" data-value="1">★</i><i class="text-warning" data-value="1">★</i><i class="text-warning" data-value="1">★</i><i class="text-warning" data-value="1">★</i></i><i class="star" data-value="1">★</i>
                {% endif %}

                {% if owner.score == 5 %}
                    <i class="text-warning" data-value="1">★</i><i class="text-warning" data-value="1">★</i><i class="text-warning" data-value="1">★</i><i class="text-warning" data-value="1">★</i><i class="text-warning" data-value="1">★</i>
                {% endif %}
            </li>
        </ul> 

    {% endfor %}
    
    
    
        </div>
    </main>
</section>

{% set itemToMap = [] %}

{% for key, currentArtisan in artisanAddress %}
    {% for key2, jsp in currentArtisan %}
        {% if key2 == oneArtisan.name %}
            {% set itemToMap = itemToMap|merge([currentArtisan]) %}
        {% endif %}
    {% endfor %} 
{% endfor %}
<div id="map" data-address = "{{ itemToMap | json_encode() }}"></div>


{% endblock %}